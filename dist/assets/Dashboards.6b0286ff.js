import{_ as t}from"./Breadcrumbs.7ab39bf2.js";import{r as a,o as s,a as e,e as o,d as l,M as n,N as r,g as u,V as i,t as c,w as d,i as h}from"./vendor.dc6bd94e.js";const g={class:"container mx-auto"},m={class:"relative inline-block w-30 text-green-500 mb-12"},p=l("p",null,"CatÃ©gorie:",-1),b=["value"],f={key:0,class:"grid grid-cols-12 gap-5"},k=["src"],x=l("p",{class:"text-base mt-4"},"Status Code",-1),y={class:"text-xs text-gray-400"},$={class:"my-2 text-sm text-gray-500 mb-3 break-words"};const C={data:()=>({allData:[],userData:i.decode(localStorage.getItem("token"))}),methods:{async loadData(){if(this.$route.query.cat){this.allData=[];const t=this.$route.query.cat?this.$route.query.cat:null;await fetch(`https://warm-inlet-55236.herokuapp.com/api/user/${this.userData.userId}/categories/${t}`,{method:"GET",headers:{"Content-Type":"application/json","x-access-token":localStorage.getItem("token")}}).then((t=>t.json())).then((t=>{!t.status||401!=t.status&&403!=t.status&&400!=t.status?t.cat.sites.map((t=>{const{link:a,method:s,health:e,statusCode:o}=t;this.allData.push({link:a,method:s,health:e,statusCode:o})})):(console.log("error"),this.logout())}))}},logout(){localStorage.removeItem("token"),this.$router.push("/login"),this.$store.commit("clearAllLinks")},changeCat(t){this.$router.push(`/dashboard?cat=${t.target.value}`),setTimeout((()=>{this.loadData()}),100)}},computed:{catList(){return this.$store.state.allLinks}},mounted(){setTimeout((()=>{this.catList&&this.catList.length>0?setTimeout((()=>{this.$route.query.cat||this.$router.push(`/dashboard?cat=${this.catList[0].id}`),setTimeout((()=>{this.loadData()}),100)}),400):this.loadData()}),500),console.log(this.$route.query.cat)}},D=Object.assign(C,{setup:function(i){return(i,C)=>{const D=a("BaseBtn"),v=a("BaseCard");return s(),e("div",g,[o(t,{parentTitle:"Dashboard"}),l("div",m,[p,l("select",{onChange:C[0]||(C[0]=(...t)=>i.changeCat&&i.changeCat(...t)),class:"w-full h-10 pl-3 pr-6 text-base placeholder-green-500 bg-gray-50 border rounded-lg focus:shadow-outline"},[(s(!0),e(n,null,r(i.catList,(t=>(s(),e("option",{key:t,value:t.id},c(t.name),9,b)))),128))],32)]),0!==i.allData.length?(s(),e("div",f,[(s(!0),e(n,null,r(i.allData,(t=>(s(),e("div",{class:"\n                    col-span-12\n                    xl:col-span-3\n                    lg:col-span-3\n                    md:col-span-6\n                    sm:col-span-6\n                ",key:t},[o(v,{class:"text-center"},{default:d((()=>[l("img",{class:"\n                            w-20\n                            h-20\n                            m-auto\n                            shadow-lg\n                            avatar-md\n                            rounded-full\n                        ",src:t.health?405===t.statusCode?"/images/status/warn.png":"/images/status/ok.png":"/images/status/off.png",alt:""},null,8,k),x,l("p",y,c(t.statusCode),1),l("p",$,c(t.link),1),o(D,{sm:"",class:"bg-success text-white rounded-full cursor-default"},{default:d((()=>[h(c(t.method),1)])),_:2},1024)])),_:2},1024)])))),128))])):u("",!0)])}}});export{D as default};

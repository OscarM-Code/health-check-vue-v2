import{V as e,r as s,o as t,c as o,a,b as r,d as l,e as n,w as i,f as d,v as c,t as u,g as p,h as m,i as g,j as h,k as f,p as b,l as v,m as y,n as k,q as x,u as w,s as S,x as L}from"./vendor.329b2b2f.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver((e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&s(e)})).observe(document,{childList:!0,subtree:!0})}function s(e){if(e.ep)return;e.ep=!0;const s=function(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerpolicy&&(s.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?s.credentials="include":"anonymous"===e.crossorigin?s.credentials="omit":s.credentials="same-origin",s}(e);fetch(e.href,s)}}();const _={name:"App",data:()=>({userDatas:localStorage.getItem("token")?e.decode(localStorage.getItem("token")):null}),computed:{links(){return this.$store.state.allLinks?this.$store.state.allLinks:[]}},methods:{logout(){localStorage.removeItem("token"),this.$router.push("/login"),this.$store.commit("clearAllLinks")},async setCat(){if(localStorage.getItem("token")){if(this.links&&0!==this.links.length)return;let s,t=await e.decode(localStorage.getItem("token"));s="ROLE_ADMIN"===t.role?"https://warm-inlet-55236.herokuapp.com/api/categories":"https://warm-inlet-55236.herokuapp.com/api/userCategories",await fetch(s,{method:"GET",headers:{"Content-Type":"application/json","x-access-token":localStorage.getItem("token")}}).then((e=>e.json())).then((async e=>{!e.status||401!=e.status&&403!=e.status&&400!=e.status||(console.log("error"),this.logout()),this.userDatas=t,await this.$store.commit("getAllLinks",e)})).catch((e=>{console.log(e)}))}}},mounted(){localStorage.getItem("token")?setInterval((()=>{this.setCat()}),3e4):this.$router.push("/login")},watch:{async $route(e,s){this.setCat()}}};_.render=function(e,a,r,l,n,i){const d=s("router-view");return t(),o(d)};const C={},A=function(e,s){return s&&0!==s.length?Promise.all(s.map((e=>{if((e=`/${e}`)in C)return;C[e]=!0;const s=e.endsWith(".css"),t=s?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${t}`))return;const o=document.createElement("link");return o.rel=s?"stylesheet":"modulepreload",s||(o.as="script",o.crossOrigin=""),o.href=e,document.head.appendChild(o),s?new Promise(((e,s)=>{o.addEventListener("load",e),o.addEventListener("error",s)})):void 0}))).then((()=>e())):e()},N={};N.render=function(e,s){return t(),a("h1",null,"NotFound")};var P=r({modules:{largeSidebar:{namespaced:!0,state:{sidebarToggleProperties:{isSideNavOpen:!0}},getters:{getSideBarToggleProperties:e=>e.sidebarToggleProperties},mutations:{toggleSidebarProperties:e=>e.sidebarToggleProperties.isSideNavOpen=!e.sidebarToggleProperties.isSideNavOpen}}},state:{allLinks:[]},mutations:{getAllLinks(e,s){s.map((s=>{e.allLinks.push({id:s._id,name:s.name})}))},incrementAllLinks(e,s){e.allLinks=[...e.allLinks,{id:s._id,name:s.name}]},modifyAllLinks(e,s){let t=e.allLinks.findIndex((e=>e.id===s.cat));e.allLinks[t].name=s.name},deleteAllLinks(e,s){let t=e.allLinks.findIndex((e=>e.id===s));e.allLinks.splice(t,1)},clearAllLinks(e){e.allLinks=[]}}});const I={name:"Login",data:()=>({mail:null,password:null,verif:!0,errorMessage:null}),methods:{login(){this.mail&&this.password?fetch("https://warm-inlet-55236.herokuapp.com/api/login",{method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify({email:this.mail,password:this.password})}).then((e=>e.json())).then((e=>{200===e.status?(this.verif=!0,this.toast("Login successfully","success"),localStorage.setItem("token",e.thisUser.token),setTimeout((()=>{this.$router.push("/dashboard")}),1e3)):(this.toast(e.message,"danger"),this.verif=!1,this.errorMessage=e.message)})).catch((e=>{console.log(e),this.toast("Une erreur est survenue.","danger"),this.verif=!1,this.errorMessage="Une erreur est survenue."})):(this.toast("Tout les champs doivent être remplis","danger"),this.verif=!1,this.errorMessage="Tout les champs doivent être remplis")}},created(){},setup:()=>({toast:(e,s)=>{m(e,{position:"top-left",timeout:5e3,type:s,showIcon:!0})}}),mounted(){localStorage.getItem("token")&&this.$router.push("/dashboard")}},$={class:"auth-layout-wrap flex justify-center min-h-screen flex-col bg-cover items-center",style:{"background-image":"url(../../images/photo-wide-4.jpg)"}},j={class:"container-session-v1 max-w-2xl"},B={class:"grid grid-cols-12"},O={class:"col-span-12 lg:col-span-6"},T={class:"p-5"},M=l("h1",{class:"mb-3 text-lg"},"Se connecter ",-1),V={class:"mb-3"},E=l("label",{class:"text-xs text-gray-600",for:""},"Adresse mail",-1),U={class:"mb-3"},D=l("label",{class:"text-xs text-gray-600",for:""},"Mot de passe",-1),z={key:0,class:"text-red-500"},F={class:"mb-4"},R=g("Connexion"),q={class:"col-span-12 bg-cover lg:col-span-6",style:{"background-image":"url(../../images/photo-long-3.jpg)"}},H={class:"flex justify-center items-center flex-col h-full px-4 py-2"},Z=l("p",{class:"mb-14"},"Vous n'avez pas de compte ?",-1),J=l("i",{class:"i-Mail-with-At-Sign align-middle mr-2"},null,-1),W=g("Créer un compte ");I.render=function(e,o,r,m,g,h){const f=s("BaseBtn"),b=s("BaseCard");return t(),a("div",$,[l("div",j,[n(b,{noPadding:"",class:"overflow-hidden"},{default:i((()=>[l("div",B,[l("div",O,[l("div",T,[M,l("form",null,[l("div",V,[E,d(l("input",{class:"w-full px-4 py-1 bg-gray-100 focus:outline-none border border-gray-400 rounded-full",type:"email",placeholder:"","onUpdate:modelValue":o[0]||(o[0]=e=>g.mail=e)},null,512),[[c,g.mail]])]),l("div",U,[D,d(l("input",{class:"w-full px-4 py-1 bg-gray-100 focus:outline-none border border-gray-400 rounded-full",type:"password",placeholder:"","onUpdate:modelValue":o[1]||(o[1]=e=>g.password=e)},null,512),[[c,g.password]])]),g.verif?p("",!0):(t(),a("p",z,u(g.errorMessage),1)),l("div",F,[n(f,{block:"",class:"bg-green-500 mb-2 text-white  rounded-full",onClick:h.login},{default:i((()=>[R])),_:1},8,["onClick"])])])])]),l("div",q,[l("div",H,[Z,n(f,{block:"",rounded:"",class:"mb-3 border border-green-500 bg-gray-100 text-green-500 hover:bg-green-500 hover:text-white",onClick:o[2]||(o[2]=e=>this.$router.push("/register"))},{default:i((()=>[J,W])),_:1})])])])])),_:1})])])};const G={name:"register",data:()=>({firstName:null,lastName:null,mail:null,password:null,validForm:!0,errorMessage:null}),methods:{register(){const e=/^[A-Za-zÀ-ú'-]{1,15}$/g,s=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;this.firstName&&this.lastName&&this.mail&&this.password?this.firstName.match(e)&&this.lastName.match(e)&&this.mail.match(s)?fetch("https://warm-inlet-55236.herokuapp.com/api/register",{method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify({first_name:this.firstName,last_name:this.lastName,email:this.mail,password:this.password})}).then((e=>e.json())).then((e=>{200===e.statusCode?(this.toast("Registered successfully","success"),this.$router.push(`/login?email=${this.mail}`),this.validForm=!0):(this.toast(e.res.message,"danger"),this.errorMessage=e.res.message,this.validForm=!1)})).catch((e=>{console.log(e),this.toast("Something went wrong","danger"),this.validForm=!1,this.errorMessage="Une erreur est survenue"})):(this.toast("Please enter valid data","danger"),this.validForm=!1,this.errorMessage="Veuillez entrer des données valides"):(this.toast("Please fill all the fields.","danger"),this.validForm=!1,this.errorMessage="Veuillez remplir tous les champs")}},mounted(){localStorage.getItem("token")&&this.$router.push("/dashboards/dashboard")},setup:()=>({toast:(e,s)=>{m(e,{position:"top-left",timeout:5e3,type:s,showIcon:!0})}})},K={class:"auth-layout-wrap flex justify-center min-h-screen flex-col bg-cover items-center",style:{"background-image":"url(../../images/photo-wide-4.jpg)"}},Q={class:"container-session-v1 max-w-2xl"},X={class:"grid grid-cols-12"},Y={class:"col-span-12 bg-cover lg:col-span-6",style:{"background-image":"url(../../images/photo-long-3.jpg)"}},ee={class:"block justify-center items-center flex-col h-full px-4 py-2 lg:flex"},se=l("p",{class:"mb-14"},"Vous avez déjà un compte ?",-1),te=l("i",{class:"i-Mail-with-At-Sign align-middle mr-2"},null,-1),oe=g("Se connecter "),ae={class:"col-span-12 lg:col-span-6"},re={class:"p-5"},le=l("h1",{class:"mb-3 text-lg"},"Créer un compte ",-1),ne={class:"mb-3"},ie=l("label",{class:"text-base text-gray-600",for:""},"Votre prénom",-1),de={class:"mb-3"},ce=l("label",{class:"text-base text-gray-600",for:""},"Votre nom",-1),ue={class:"mb-3"},pe=l("label",{class:"text-base text-gray-600",for:""},"Votre adresse Mail",-1),me={class:"mb-3"},ge=l("label",{class:"text-base text-gray-600",for:""},"Mot de passe",-1),he=g("Créer le compte");G.render=function(e,o,r,u,p,m){const g=s("BaseBtn"),h=s("BaseCard");return t(),a("div",K,[l("div",Q,[n(h,{noPadding:"",class:"overflow-hidden"},{default:i((()=>[l("div",X,[l("div",Y,[l("div",ee,[se,n(g,{block:"",rounded:"",class:"mb-3 border border-green-500 bg-gray-100 text-green-500 hover:bg-green-500 hover:text-white",onClick:o[0]||(o[0]=e=>this.$router.push("/login"))},{default:i((()=>[te,oe])),_:1})])]),l("div",ae,[l("div",re,[le,l("form",null,[l("div",ne,[ie,d(l("input",{class:"w-full px-4 py-1 border border-gray focus:outline-none rounded-full",type:"text",placeholder:"","onUpdate:modelValue":o[1]||(o[1]=e=>p.firstName=e)},null,512),[[c,p.firstName]])]),l("div",de,[ce,d(l("input",{class:"w-full px-4 py-1 border border-gray focus:outline-none rounded-full",type:"text",placeholder:"","onUpdate:modelValue":o[2]||(o[2]=e=>p.lastName=e)},null,512),[[c,p.lastName]])]),l("div",ue,[pe,d(l("input",{class:"w-full px-4 py-1 border border-gray focus:outline-none rounded-full",type:"email",placeholder:"","onUpdate:modelValue":o[3]||(o[3]=e=>p.mail=e)},null,512),[[c,p.mail]])]),l("div",me,[ge,d(l("input",{class:"w-full px-4 py-1 border border-gray focus:outline-none rounded-full",type:"password",placeholder:"","onUpdate:modelValue":o[4]||(o[4]=e=>p.password=e)},null,512),[[c,p.password]])]),n(g,{rounded:"",block:"",class:"bg-green-500 text-white",onClick:m.register},{default:i((()=>[he])),_:1},8,["onClick"])])])])])])),_:1})])])};const fe=[{path:"/",name:"Home",component:()=>A((()=>import("./index.cebb680b.js")),["assets/index.cebb680b.js","assets/index.0cf85293.css","assets/vendor.329b2b2f.js"]),redirect:"/dashboard",meta:{title:"Home"},children:[{path:"/dashboard",name:"Dashboard",component:()=>A((()=>import("./Dashboards.966b7709.js")),["assets/Dashboards.966b7709.js","assets/Breadcrumbs.91e35590.js","assets/vendor.329b2b2f.js"]),meta:{title:"Dashboard"}},{path:"/options",name:"components",component:()=>A((()=>import("./Options.67c8302d.js")),["assets/Options.67c8302d.js","assets/Breadcrumbs.91e35590.js","assets/vendor.329b2b2f.js"]),meta:{title:"Options"}}]},{path:"/login",component:I},{path:"/register",component:G},{path:"/:path(.*)",component:N}],be=h({history:f(),scrollBehavior:(e,s,t)=>({left:0,top:0}),routes:fe});be.afterEach((()=>{window.innerWidth<=1200&&(P.state.largeSidebar.sidebarToggleProperties.isSideNavOpen,P.commit("largeSidebar/toggleSidebarProperties"))}));b("data-v-6c51b3fe");const ve={class:"card flex flex-col bg-white dark:bg-gray-800 dark:text-white"};v();const ye={props:{noPadding:Boolean},setup(e){const s=e;return(e,o)=>(t(),a("div",ve,[y(e.$slots,"cardHeader",{},void 0,!0),l("div",{class:k(["card-body",s.noPadding?"noPadding":""])},[y(e.$slots,"default",{},void 0,!0)],2)]))},__scopeId:"data-v-6c51b3fe"};const ke={props:{block:Boolean,sm:Boolean,xl:Boolean,icon:Boolean,rounded:Boolean,icon:Boolean},setup(e){const s=e;return(e,o)=>(t(),a("button",{type:"button",class:k(["btn  rounded font-normal leading-4 ripple",[s.block?"block w-full":"inline-block",s.sm?"sm":"",s.xl?"xl":"",s.rounded?"rounded-full":"",s.icon?"p-2 flex items-center justify-center":"py-2 px-5"]])},[y(e.$slots,"default",{},void 0,!0)],2))},__scopeId:"data-v-cadb3306"};x(_).component("BaseCard",ye).component("BaseBtn",ke).use(w).use(S).use(L).use(P).use(be).mount("#app");

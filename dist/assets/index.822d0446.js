import{V as e,r as s,o as t,c as o,a as n,b as a,d as r,e as l,w as i,f as d,v as c,t as u,g as p,h as m,i as g,j as h,k as f,p as b,l as v,m as y,n as k,q as x,u as w,s as L,x as S}from"./vendor.329b2b2f.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver((e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&s(e)})).observe(document,{childList:!0,subtree:!0})}function s(e){if(e.ep)return;e.ep=!0;const s=function(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerpolicy&&(s.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?s.credentials="include":"anonymous"===e.crossorigin?s.credentials="omit":s.credentials="same-origin",s}(e);fetch(e.href,s)}}();const _={name:"App",data:()=>({userDatas:localStorage.getItem("token")?e.decode(localStorage.getItem("token")):null}),computed:{links(){return this.$store.state.allLinks?this.$store.state.allLinks:[]}},methods:{logout(){localStorage.removeItem("token"),this.$router.push("/login"),this.$store.commit("clearAllLinks")},async setCat(){if(localStorage.getItem("token")){if(this.links&&0!==this.links.length)return;let s,t=await e.decode(localStorage.getItem("token"));s="ROLE_ADMIN"===t.role?"https://warm-inlet-55236.herokuapp.com/api/categories":"https://warm-inlet-55236.herokuapp.com/api/userCategories",await fetch(s,{method:"GET",headers:{"Content-Type":"application/json","x-access-token":localStorage.getItem("token")}}).then((e=>e.json())).then((async e=>{!e.status||401!=e.status&&403!=e.status&&400!=e.status||(console.log("error"),this.logout()),this.userDatas=t,await this.$store.commit("getAllLinks",e)})).catch((e=>{console.log(e)}))}}},mounted(){localStorage.getItem("token")?setInterval((()=>{this.setCat()}),3e4):this.$router.push("/login")},watch:{async $route(e,s){this.setCat()}}};_.render=function(e,n,a,r,l,i){const d=s("router-view");return t(),o(d)};const C={},A=function(e,s){return s&&0!==s.length?Promise.all(s.map((e=>{if((e=`/${e}`)in C)return;C[e]=!0;const s=e.endsWith(".css"),t=s?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${t}`))return;const o=document.createElement("link");return o.rel=s?"stylesheet":"modulepreload",s||(o.as="script",o.crossOrigin=""),o.href=e,document.head.appendChild(o),s?new Promise(((e,s)=>{o.addEventListener("load",e),o.addEventListener("error",s)})):void 0}))).then((()=>e())):e()},N={};N.render=function(e,s){return t(),n("h1",null,"NotFound")};var I=a({modules:{largeSidebar:{namespaced:!0,state:{sidebarToggleProperties:{isSideNavOpen:!0}},getters:{getSideBarToggleProperties:e=>e.sidebarToggleProperties},mutations:{toggleSidebarProperties:e=>e.sidebarToggleProperties.isSideNavOpen=!e.sidebarToggleProperties.isSideNavOpen}}},state:{allLinks:[]},mutations:{getAllLinks(e,s){s.map((s=>{e.allLinks.push({id:s._id,name:s.name})}))},incrementAllLinks(e,s){e.allLinks=[...e.allLinks,{id:s._id,name:s.name}]},modifyAllLinks(e,s){let t=e.allLinks.findIndex((e=>e.id===s.cat));e.allLinks[t].name=s.name},deleteAllLinks(e,s){let t=e.allLinks.findIndex((e=>e.id===s));e.allLinks.splice(t,1)},clearAllLinks(e){e.allLinks=[]}}});const j={name:"Login",data(){return{mail:this.userMail?this.userMail:null,password:null,verif:!0,errorMessage:null}},props:{userMail:{type:String}},methods:{login(){this.mail&&this.password?fetch("https://warm-inlet-55236.herokuapp.com/api/login",{method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify({email:this.mail,password:this.password})}).then((e=>e.json())).then((e=>{200===e.status?(this.verif=!0,this.toast("Login successfully","success"),localStorage.setItem("token",e.thisUser.token),setTimeout((()=>{this.$router.push("/dashboard")}),1e3)):(this.toast(e.message,"danger"),this.verif=!1,this.errorMessage=e.message)})).catch((e=>{console.log(e),this.toast("Une erreur est survenue.","danger"),this.verif=!1,this.errorMessage="Une erreur est survenue."})):(this.toast("Tout les champs doivent être remplis","danger"),this.verif=!1,this.errorMessage="Tout les champs doivent être remplis")}},created(){},setup:()=>({toast:(e,s)=>{m(e,{position:"top-left",timeout:5e3,type:s,showIcon:!0})}}),mounted(){localStorage.getItem("token")&&this.$router.push("/dashboard")}},M={class:"\n      auth-layout-wrap\n      flex\n      justify-center\n      min-h-screen\n      flex-col\n      bg-cover\n      items-center\n    ",style:{"background-image":"url(../../images/photo-wide-4.jpg)"}},P={class:"container-session-v1 max-w-2xl"},$={class:"grid grid-cols-12"},V={class:"col-span-12 lg:col-span-6"},B={class:"p-5"},O=r("h1",{class:"mb-3 text-lg"},"Se connecter",-1),T={class:"mb-3"},E=r("label",{class:"text-xs text-gray-600",for:""},"Adresse mail",-1),U={class:"mb-3"},z=r("label",{class:"text-xs text-gray-600",for:""},"Mot de passe",-1),D={key:0,class:"text-red-500"},F={class:"mb-4"},R=g("Connexion"),q={class:"col-span-12 bg-cover lg:col-span-6",style:{"background-image":"url(../../images/photo-long-3.jpg)"}},H={class:"flex justify-center items-center flex-col h-full px-4 py-2"},Z=r("p",{class:"mb-14"},"Vous n'avez pas de compte ?",-1),J=r("i",{class:"i-Mail-with-At-Sign align-middle mr-2"},null,-1),W=g("Créer un compte ");j.render=function(e,o,a,m,g,h){const f=s("BaseBtn"),b=s("BaseCard");return t(),n("div",M,[r("div",P,[l(b,{noPadding:"",class:"overflow-hidden"},{default:i((()=>[r("div",$,[r("div",V,[r("div",B,[O,r("form",null,[r("div",T,[E,d(r("input",{class:"\n                      w-full\n                      px-4\n                      py-1\n                      bg-gray-100\n                      focus:outline-none\n                      border border-gray-400\n                      rounded-full\n                    ",type:"email",placeholder:"","onUpdate:modelValue":o[0]||(o[0]=e=>g.mail=e)},null,512),[[c,g.mail]])]),r("div",U,[z,d(r("input",{class:"\n                      w-full\n                      px-4\n                      py-1\n                      bg-gray-100\n                      focus:outline-none\n                      border border-gray-400\n                      rounded-full\n                    ",type:"password",placeholder:"","onUpdate:modelValue":o[1]||(o[1]=e=>g.password=e)},null,512),[[c,g.password]])]),g.verif?p("",!0):(t(),n("p",D,u(g.errorMessage),1)),r("div",F,[l(f,{block:"",class:"bg-green-500 mb-2 text-white rounded-full",onClick:h.login},{default:i((()=>[R])),_:1},8,["onClick"])])])])]),r("div",q,[r("div",H,[Z,l(f,{block:"",rounded:"",class:"\n                  mb-3\n                  border border-green-500\n                  bg-gray-100\n                  text-green-500\n                  hover:bg-green-500 hover:text-white\n                ",onClick:o[2]||(o[2]=e=>this.$router.push("/register"))},{default:i((()=>[J,W])),_:1})])])])])),_:1})])])};const G={name:"register",data:()=>({firstName:null,lastName:null,mail:null,password:null,validForm:!0,errorMessage:null}),methods:{register(){const e=/^[A-Za-zÀ-ú'-]{1,15}$/g,s=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;this.firstName&&this.lastName&&this.mail&&this.password?this.firstName.match(e)&&this.lastName.match(e)&&this.mail.match(s)?fetch("https://warm-inlet-55236.herokuapp.com/api/register",{method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify({first_name:this.firstName,last_name:this.lastName,email:this.mail,password:this.password})}).then((e=>e.json())).then((e=>{200===e.statusCode?(this.toast("Le compte à bien été créé","success"),this.$router.push({path:"/login",params:{useMail:this.mail}}),this.validForm=!0):(this.toast(e.res.message,"danger"),this.errorMessage=e.res.message,this.validForm=!1)})).catch((e=>{console.log(e),this.toast("Une erreur est survenue","danger"),this.validForm=!1,this.errorMessage="Une erreur est survenue"})):(this.toast("Veuillez entrer des données valides","danger"),this.validForm=!1,this.errorMessage="Veuillez entrer des données valides"):(this.toast("Veuillez remplir tous les champs","danger"),this.validForm=!1,this.errorMessage="Veuillez remplir tous les champs")}},mounted(){localStorage.getItem("token")&&this.$router.push("/dashboard")},setup:()=>({toast:(e,s)=>{m(e,{position:"top-left",timeout:5e3,type:s,showIcon:!0})}})},K={class:"\n      auth-layout-wrap\n      flex\n      justify-center\n      min-h-screen\n      flex-col\n      bg-cover\n      items-center\n    ",style:{"background-image":"url(../../images/photo-wide-4.jpg)"}},Q={class:"container-session-v1 max-w-2xl"},X={class:"grid grid-cols-12"},Y={class:"col-span-12 bg-cover lg:col-span-6",style:{"background-image":"url(../../images/photo-long-3.jpg)"}},ee={class:"\n                block\n                justify-center\n                items-center\n                flex-col\n                h-full\n                px-4\n                py-2\n                lg:flex\n              "},se=r("p",{class:"mb-14"},"Vous avez déjà un compte ?",-1),te=r("i",{class:"i-Mail-with-At-Sign align-middle mr-2"},null,-1),oe=g("Se connecter "),ne={class:"col-span-12 lg:col-span-6"},ae={class:"p-5"},re=r("h1",{class:"mb-3 text-lg"},"Créer un compte",-1),le={class:"mb-3"},ie=r("label",{class:"text-base text-gray-600",for:""},"Votre prénom",-1),de={class:"mb-3"},ce=r("label",{class:"text-base text-gray-600",for:""},"Votre nom",-1),ue={class:"mb-3"},pe=r("label",{class:"text-base text-gray-600",for:""},"Votre adresse Mail",-1),me={class:"mb-3"},ge=r("label",{class:"text-base text-gray-600",for:""},"Mot de passe",-1),he=g("Créer le compte");G.render=function(e,o,a,u,p,m){const g=s("BaseBtn"),h=s("BaseCard");return t(),n("div",K,[r("div",Q,[l(h,{noPadding:"",class:"overflow-hidden"},{default:i((()=>[r("div",X,[r("div",Y,[r("div",ee,[se,l(g,{block:"",rounded:"",class:"\n                  mb-3\n                  border border-green-500\n                  bg-gray-100\n                  text-green-500\n                  hover:bg-green-500 hover:text-white\n                ",onClick:o[0]||(o[0]=e=>this.$router.push("/login"))},{default:i((()=>[te,oe])),_:1})])]),r("div",ne,[r("div",ae,[re,r("form",null,[r("div",le,[ie,d(r("input",{class:"\n                      w-full\n                      px-4\n                      py-1\n                      border border-gray\n                      focus:outline-none\n                      rounded-full\n                    ",type:"text",placeholder:"","onUpdate:modelValue":o[1]||(o[1]=e=>p.firstName=e)},null,512),[[c,p.firstName]])]),r("div",de,[ce,d(r("input",{class:"\n                      w-full\n                      px-4\n                      py-1\n                      border border-gray\n                      focus:outline-none\n                      rounded-full\n                    ",type:"text",placeholder:"","onUpdate:modelValue":o[2]||(o[2]=e=>p.lastName=e)},null,512),[[c,p.lastName]])]),r("div",ue,[pe,d(r("input",{class:"\n                      w-full\n                      px-4\n                      py-1\n                      border border-gray\n                      focus:outline-none\n                      rounded-full\n                    ",type:"email",placeholder:"","onUpdate:modelValue":o[3]||(o[3]=e=>p.mail=e)},null,512),[[c,p.mail]])]),r("div",me,[ge,d(r("input",{class:"\n                      w-full\n                      px-4\n                      py-1\n                      border border-gray\n                      focus:outline-none\n                      rounded-full\n                    ",type:"password",placeholder:"","onUpdate:modelValue":o[4]||(o[4]=e=>p.password=e)},null,512),[[c,p.password]])]),l(g,{rounded:"",block:"",class:"bg-green-500 text-white",onClick:m.register},{default:i((()=>[he])),_:1},8,["onClick"])])])])])])),_:1})])])};const fe=[{path:"/",name:"Home",component:()=>A((()=>import("./index.cebb680b.js")),["assets/index.cebb680b.js","assets/index.0cf85293.css","assets/vendor.329b2b2f.js"]),redirect:"/dashboard",meta:{title:"Home"},children:[{path:"/dashboard",name:"Dashboard",component:()=>A((()=>import("./Dashboards.966b7709.js")),["assets/Dashboards.966b7709.js","assets/Breadcrumbs.91e35590.js","assets/vendor.329b2b2f.js"]),meta:{title:"Dashboard"}},{path:"/options",name:"components",component:()=>A((()=>import("./Options.67c8302d.js")),["assets/Options.67c8302d.js","assets/Breadcrumbs.91e35590.js","assets/vendor.329b2b2f.js"]),meta:{title:"Options"}}]},{path:"/login",component:j},{path:"/register",component:G},{path:"/:path(.*)",component:N}],be=h({history:f(),scrollBehavior:(e,s,t)=>({left:0,top:0}),routes:fe});be.afterEach((()=>{window.innerWidth<=1200&&(I.state.largeSidebar.sidebarToggleProperties.isSideNavOpen,I.commit("largeSidebar/toggleSidebarProperties"))}));b("data-v-6c51b3fe");const ve={class:"card flex flex-col bg-white dark:bg-gray-800 dark:text-white"};v();const ye={props:{noPadding:Boolean},setup(e){const s=e;return(e,o)=>(t(),n("div",ve,[y(e.$slots,"cardHeader",{},void 0,!0),r("div",{class:k(["card-body",s.noPadding?"noPadding":""])},[y(e.$slots,"default",{},void 0,!0)],2)]))},__scopeId:"data-v-6c51b3fe"};const ke={props:{block:Boolean,sm:Boolean,xl:Boolean,icon:Boolean,rounded:Boolean,icon:Boolean},setup(e){const s=e;return(e,o)=>(t(),n("button",{type:"button",class:k(["btn  rounded font-normal leading-4 ripple",[s.block?"block w-full":"inline-block",s.sm?"sm":"",s.xl?"xl":"",s.rounded?"rounded-full":"",s.icon?"p-2 flex items-center justify-center":"py-2 px-5"]])},[y(e.$slots,"default",{},void 0,!0)],2))},__scopeId:"data-v-cadb3306"};x(_).component("BaseCard",ye).component("BaseBtn",ke).use(w).use(L).use(S).use(I).use(be).mount("#app");

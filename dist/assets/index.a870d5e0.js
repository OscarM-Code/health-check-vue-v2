import{V as e,r as s,o as t,c as o,a,b as l,d as r,e as n,w as i,f as d,v as c,t as u,g as p,h as m,i as g,j as h,k as f,p as b,l as v,m as y,n as k,q as x,s as w,u as S}from"./vendor.dc6bd94e.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver((e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&s(e)})).observe(document,{childList:!0,subtree:!0})}function s(e){if(e.ep)return;e.ep=!0;const s=function(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerpolicy&&(s.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?s.credentials="include":"anonymous"===e.crossorigin?s.credentials="omit":s.credentials="same-origin",s}(e);fetch(e.href,s)}}();const L={name:"App",data:()=>({userDatas:localStorage.getItem("token")?e.decode(localStorage.getItem("token")):null}),computed:{links(){return this.$store.state.allLinks?this.$store.state.allLinks:[]}},methods:{logout(){localStorage.removeItem("token"),this.$router.push("/login"),this.$store.commit("clearAllLinks")},async setCat(){if(localStorage.getItem("token")){if(this.links&&0!==this.links.length)return;console.log("get links"),console.log(this.links);let s,t=await e.decode(localStorage.getItem("token"));s="ROLE_ADMIN"===t.role?"https://warm-inlet-55236.herokuapp.com/api/categories":"https://warm-inlet-55236.herokuapp.com/api/userCategories",await fetch(s,{method:"GET",headers:{"Content-Type":"application/json","x-access-token":localStorage.getItem("token")}}).then((e=>e.json())).then((async e=>{!e.status||401!=e.status&&403!=e.status&&400!=e.status||(console.log("error"),this.logout()),this.userDatas=t,await this.$store.commit("getAllLinks",e)})).catch((e=>{console.log(e)}))}}},mounted(){localStorage.getItem("token")?setInterval((()=>{this.setCat()}),3e4):this.$router.push("/login")},watch:{async $route(e,s){this.setCat()}}};L.render=function(e,a,l,r,n,i){const d=s("router-view");return t(),o(d)};const _={},C=function(e,s){return s&&0!==s.length?Promise.all(s.map((e=>{if((e=`/${e}`)in _)return;_[e]=!0;const s=e.endsWith(".css"),t=s?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${t}`))return;const o=document.createElement("link");return o.rel=s?"stylesheet":"modulepreload",s||(o.as="script",o.crossOrigin=""),o.href=e,document.head.appendChild(o),s?new Promise(((e,s)=>{o.addEventListener("load",e),o.addEventListener("error",s)})):void 0}))).then((()=>e())):e()},A={};A.render=function(e,s){return t(),a("h1",null,"NotFound")};var N=l({modules:{largeSidebar:{namespaced:!0,state:{sidebarToggleProperties:{isSideNavOpen:!0}},getters:{getSideBarToggleProperties:e=>e.sidebarToggleProperties},mutations:{toggleSidebarProperties:e=>e.sidebarToggleProperties.isSideNavOpen=!e.sidebarToggleProperties.isSideNavOpen}}},state:{allLinks:[]},mutations:{getAllLinks(e,s){s.map((s=>{e.allLinks.push({id:s._id,name:s.name})}))},incrementAllLinks(e,s){e.allLinks=[...e.allLinks,{id:s._id,name:s.name}]},modifyAllLinks(e,s){let t=e.allLinks.findIndex((e=>e.id===s.cat));e.allLinks[t].name=s.name},deleteAllLinks(e,s){let t=e.allLinks.findIndex((e=>e.id===s));e.allLinks.splice(t,1)},clearAllLinks(e){e.allLinks=[]}}});const P={name:"Login",data:()=>({mail:null,password:null,verif:!0,errorMessage:null}),methods:{login(){this.mail&&this.password?fetch("https://warm-inlet-55236.herokuapp.com/api/login",{method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify({email:this.mail,password:this.password})}).then((e=>e.json())).then((e=>{200===e.status?(this.verif=!0,this.toast("Login successfully","success"),localStorage.setItem("token",e.thisUser.token),setTimeout((()=>{this.$router.push("/dashboard")}),1e3)):(this.toast(e.message,"danger"),this.verif=!1,this.errorMessage=e.message)})).catch((e=>{console.log(e),this.toast("Une erreur est survenue.","danger"),this.verif=!1,this.errorMessage="Une erreur est survenue."})):(this.toast("Tout les champs doivent être remplis","danger"),this.verif=!1,this.errorMessage="Tout les champs doivent être remplis")}},created(){},setup:()=>({toast:(e,s)=>{m(e,{position:"top-left",timeout:5e3,type:s,showIcon:!0})}}),mounted(){localStorage.getItem("token")&&this.$router.push("/dashboard")}},I={class:"auth-layout-wrap flex justify-center min-h-screen flex-col bg-cover items-center",style:{"background-image":"url(../../images/photo-wide-4.jpg)"}},$={class:"container-session-v1 max-w-2xl"},j={class:"grid grid-cols-12"},B={class:"col-span-12 lg:col-span-6"},O={class:"p-5"},T=r("h1",{class:"mb-3 text-lg"},"Se connecter ",-1),M={class:"mb-3"},V=r("label",{class:"text-xs text-gray-600",for:""},"Adresse mail",-1),E={class:"mb-3"},U=r("label",{class:"text-xs text-gray-600",for:""},"Mot de passe",-1),D={key:0,class:"text-red-500"},z={class:"mb-4"},F=g("Connexion"),R={class:"col-span-12 bg-cover lg:col-span-6",style:{"background-image":"url(../../images/photo-long-3.jpg)"}},q={class:"flex justify-center items-center flex-col h-full px-4 py-2"},H=r("p",{class:"mb-14"},"Vous n'avez pas de compte ?",-1),Z=r("i",{class:"i-Mail-with-At-Sign align-middle mr-2"},null,-1),J=g("Créer un compte ");P.render=function(e,o,l,m,g,h){const f=s("BaseBtn"),b=s("BaseCard");return t(),a("div",I,[r("div",$,[n(b,{noPadding:"",class:"overflow-hidden"},{default:i((()=>[r("div",j,[r("div",B,[r("div",O,[T,r("form",null,[r("div",M,[V,d(r("input",{class:"w-full px-4 py-1 bg-gray-100 focus:outline-none border border-gray-400 rounded-full",type:"email",placeholder:"","onUpdate:modelValue":o[0]||(o[0]=e=>g.mail=e)},null,512),[[c,g.mail]])]),r("div",E,[U,d(r("input",{class:"w-full px-4 py-1 bg-gray-100 focus:outline-none border border-gray-400 rounded-full",type:"password",placeholder:"","onUpdate:modelValue":o[1]||(o[1]=e=>g.password=e)},null,512),[[c,g.password]])]),g.verif?p("",!0):(t(),a("p",D,u(g.errorMessage),1)),r("div",z,[n(f,{block:"",class:"bg-green-500 mb-2 text-white  rounded-full",onClick:h.login},{default:i((()=>[F])),_:1},8,["onClick"])])])])]),r("div",R,[r("div",q,[H,n(f,{block:"",rounded:"",class:"mb-3 border border-green-500 bg-gray-100 text-green-500 hover:bg-green-500 hover:text-white",onClick:o[2]||(o[2]=e=>this.$router.push("/register"))},{default:i((()=>[Z,J])),_:1})])])])])),_:1})])])};const W={name:"register",data:()=>({firstName:null,lastName:null,mail:null,password:null,validForm:!0,errorMessage:null}),methods:{register(){const e=/^[A-Za-zÀ-ú'-]{1,15}$/g,s=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;this.firstName&&this.lastName&&this.mail&&this.password?this.firstName.match(e)&&this.lastName.match(e)&&this.mail.match(s)?fetch("https://warm-inlet-55236.herokuapp.com/api/register",{method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify({first_name:this.firstName,last_name:this.lastName,email:this.mail,password:this.password})}).then((e=>e.json())).then((e=>{console.log(e),200===e.statusCode?(this.toast("Registered successfully","success"),this.$router.push(`/login?email=${this.mail}`),this.validForm=!0):(this.toast(e.res.message,"danger"),this.errorMessage=e.res.message,this.validForm=!1)})).catch((e=>{console.log(e),this.toast("Something went wrong","danger"),this.validForm=!1,this.errorMessage="Une erreur est survenue"})):(this.toast("Please enter valid data","danger"),this.validForm=!1,this.errorMessage="Veuillez entrer des données valides"):(this.toast("Please fill all the fields.","danger"),this.validForm=!1,this.errorMessage="Veuillez remplir tous les champs")}},mounted(){localStorage.getItem("token")&&this.$router.push("/dashboards/dashboard")},setup:()=>({toast:(e,s)=>{m(e,{position:"top-left",timeout:5e3,type:s,showIcon:!0})}})},G={class:"auth-layout-wrap flex justify-center min-h-screen flex-col bg-cover items-center",style:{"background-image":"url(../../images/photo-wide-4.jpg)"}},K={class:"container-session-v1 max-w-2xl"},Q={class:"grid grid-cols-12"},X={class:"col-span-12 bg-cover lg:col-span-6",style:{"background-image":"url(../../images/photo-long-3.jpg)"}},Y={class:"block justify-center items-center flex-col h-full px-4 py-2 lg:flex"},ee=r("p",{class:"mb-14"},"Vous avez déjà un compte ?",-1),se=r("i",{class:"i-Mail-with-At-Sign align-middle mr-2"},null,-1),te=g("Se connecter "),oe={class:"col-span-12 lg:col-span-6"},ae={class:"p-5"},le=r("h1",{class:"mb-3 text-lg"},"Créer un compte ",-1),re={class:"mb-3"},ne=r("label",{class:"text-base text-gray-600",for:""},"Votre prénom",-1),ie={class:"mb-3"},de=r("label",{class:"text-base text-gray-600",for:""},"Votre nom",-1),ce={class:"mb-3"},ue=r("label",{class:"text-base text-gray-600",for:""},"Votre adresse Mail",-1),pe={class:"mb-3"},me=r("label",{class:"text-base text-gray-600",for:""},"Mot de passe",-1),ge=g("Créer le compte");W.render=function(e,o,l,u,p,m){const g=s("BaseBtn"),h=s("BaseCard");return t(),a("div",G,[r("div",K,[n(h,{noPadding:"",class:"overflow-hidden"},{default:i((()=>[r("div",Q,[r("div",X,[r("div",Y,[ee,n(g,{block:"",rounded:"",class:"mb-3 border border-green-500 bg-gray-100 text-green-500 hover:bg-green-500 hover:text-white",onClick:o[0]||(o[0]=e=>this.$router.push("/login"))},{default:i((()=>[se,te])),_:1})])]),r("div",oe,[r("div",ae,[le,r("form",null,[r("div",re,[ne,d(r("input",{class:"w-full px-4 py-1 border border-gray focus:outline-none rounded-full",type:"text",placeholder:"","onUpdate:modelValue":o[1]||(o[1]=e=>p.firstName=e)},null,512),[[c,p.firstName]])]),r("div",ie,[de,d(r("input",{class:"w-full px-4 py-1 border border-gray focus:outline-none rounded-full",type:"text",placeholder:"","onUpdate:modelValue":o[2]||(o[2]=e=>p.lastName=e)},null,512),[[c,p.lastName]])]),r("div",ce,[ue,d(r("input",{class:"w-full px-4 py-1 border border-gray focus:outline-none rounded-full",type:"email",placeholder:"","onUpdate:modelValue":o[3]||(o[3]=e=>p.mail=e)},null,512),[[c,p.mail]])]),r("div",pe,[me,d(r("input",{class:"w-full px-4 py-1 border border-gray focus:outline-none rounded-full",type:"password",placeholder:"","onUpdate:modelValue":o[4]||(o[4]=e=>p.password=e)},null,512),[[c,p.password]])]),n(g,{rounded:"",block:"",class:"bg-green-500 text-white",onClick:m.register},{default:i((()=>[ge])),_:1},8,["onClick"])])])])])])),_:1})])])};const he=[{path:"/",name:"Home",component:()=>C((()=>import("./index.f7dea07e.js")),["assets/index.f7dea07e.js","assets/index.29633e96.css","assets/vendor.dc6bd94e.js"]),redirect:"/dashboards/dashboard-version-one",meta:{title:"Home"},children:[{path:"/dashboard",name:"Dashboard",component:()=>C((()=>import("./Dashboards.6b0286ff.js")),["assets/Dashboards.6b0286ff.js","assets/Breadcrumbs.7ab39bf2.js","assets/vendor.dc6bd94e.js"]),meta:{title:"Dashboard"}},{path:"/options",name:"components",component:()=>C((()=>import("./Options.5f85cbaa.js")),["assets/Options.5f85cbaa.js","assets/Breadcrumbs.7ab39bf2.js","assets/vendor.dc6bd94e.js"]),meta:{title:"Options"}}]},{path:"/login",component:P},{path:"/register",component:W},{path:"/:path(.*)",component:A}],fe=h({history:f(),scrollBehavior:(e,s,t)=>({left:0,top:0}),routes:he});fe.afterEach((()=>{window.innerWidth<=1200&&(N.state.largeSidebar.sidebarToggleProperties.isSideNavOpen,N.commit("largeSidebar/toggleSidebarProperties"))}));b("data-v-6c51b3fe");const be={class:"card flex flex-col bg-white dark:bg-gray-800 dark:text-white"};v();const ve={props:{noPadding:Boolean},setup(e){const s=e;return(e,o)=>(t(),a("div",be,[y(e.$slots,"cardHeader",{},void 0,!0),r("div",{class:k(["card-body",s.noPadding?"noPadding":""])},[y(e.$slots,"default",{},void 0,!0)],2)]))},__scopeId:"data-v-6c51b3fe"};const ye={props:{block:Boolean,sm:Boolean,xl:Boolean,icon:Boolean,rounded:Boolean,icon:Boolean},setup(e){const s=e;return(e,o)=>(t(),a("button",{type:"button",class:k(["btn  rounded font-normal leading-4 ripple",[s.block?"block w-full":"inline-block",s.sm?"sm":"",s.xl?"xl":"",s.rounded?"rounded-full":"",s.icon?"p-2 flex items-center justify-center":"py-2 px-5"]])},[y(e.$slots,"default",{},void 0,!0)],2))},__scopeId:"data-v-cadb3306"};x(L).component("BaseCard",ve).component("BaseBtn",ye).use(w).use(S).use(N).use(fe).mount("#app");

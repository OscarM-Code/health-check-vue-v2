import{V as e,r as t,o as s,c as o,a,b as r,d as l,e as n,w as i,f as d,v as c,t as u,g as p,h as m,i as g,j as h,k as f,p as b,l as v,m as y,n as k,q as x,s as w,u as S}from"./vendor.dc6bd94e.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const L={name:"App",data:()=>({userDatas:localStorage.getItem("token")?e.decode(localStorage.getItem("token")):null}),computed:{links(){return this.$store.state.allLinks?this.$store.state.allLinks:[]}},methods:{logout(){localStorage.removeItem("token"),this.$router.push("/login"),this.$store.commit("clearAllLinks")},async setCat(){if(localStorage.getItem("token")){if(this.links&&0!==this.links.length)return;let t,s=await e.decode(localStorage.getItem("token"));t="ROLE_ADMIN"===s.role?"https://warm-inlet-55236.herokuapp.com/api/categories":"https://warm-inlet-55236.herokuapp.com/api/userCategories",await fetch(t,{method:"GET",headers:{"Content-Type":"application/json","x-access-token":localStorage.getItem("token")}}).then((e=>e.json())).then((async e=>{!e.status||401!=e.status&&403!=e.status&&400!=e.status||(console.log("error"),this.logout()),this.userDatas=s,await this.$store.commit("getAllLinks",e)})).catch((e=>{console.log(e)}))}}},mounted(){localStorage.getItem("token")?setInterval((()=>{this.setCat()}),3e4):this.$router.push("/login")},watch:{async $route(e,t){this.setCat()}}};L.render=function(e,a,r,l,n,i){const d=t("router-view");return s(),o(d)};const _={},C=function(e,t){return t&&0!==t.length?Promise.all(t.map((e=>{if((e=`/${e}`)in _)return;_[e]=!0;const t=e.endsWith(".css"),s=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${s}`))return;const o=document.createElement("link");return o.rel=t?"stylesheet":"modulepreload",t||(o.as="script",o.crossOrigin=""),o.href=e,document.head.appendChild(o),t?new Promise(((e,t)=>{o.addEventListener("load",e),o.addEventListener("error",t)})):void 0}))).then((()=>e())):e()},A={};A.render=function(e,t){return s(),a("h1",null,"NotFound")};var N=r({modules:{largeSidebar:{namespaced:!0,state:{sidebarToggleProperties:{isSideNavOpen:!0}},getters:{getSideBarToggleProperties:e=>e.sidebarToggleProperties},mutations:{toggleSidebarProperties:e=>e.sidebarToggleProperties.isSideNavOpen=!e.sidebarToggleProperties.isSideNavOpen}}},state:{allLinks:[]},mutations:{getAllLinks(e,t){t.map((t=>{e.allLinks.push({id:t._id,name:t.name})}))},incrementAllLinks(e,t){e.allLinks=[...e.allLinks,{id:t._id,name:t.name}]},modifyAllLinks(e,t){let s=e.allLinks.findIndex((e=>e.id===t.cat));e.allLinks[s].name=t.name},deleteAllLinks(e,t){let s=e.allLinks.findIndex((e=>e.id===t));e.allLinks.splice(s,1)},clearAllLinks(e){e.allLinks=[]}}});const P={name:"Login",data:()=>({mail:null,password:null,verif:!0,errorMessage:null}),methods:{login(){this.mail&&this.password?fetch("https://warm-inlet-55236.herokuapp.com/api/login",{method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify({email:this.mail,password:this.password})}).then((e=>e.json())).then((e=>{200===e.status?(this.verif=!0,this.toast("Login successfully","success"),localStorage.setItem("token",e.thisUser.token),setTimeout((()=>{this.$router.push("/dashboard")}),1e3)):(this.toast(e.message,"danger"),this.verif=!1,this.errorMessage=e.message)})).catch((e=>{console.log(e),this.toast("Une erreur est survenue.","danger"),this.verif=!1,this.errorMessage="Une erreur est survenue."})):(this.toast("Tout les champs doivent être remplis","danger"),this.verif=!1,this.errorMessage="Tout les champs doivent être remplis")}},created(){},setup:()=>({toast:(e,t)=>{m(e,{position:"top-left",timeout:5e3,type:t,showIcon:!0})}}),mounted(){localStorage.getItem("token")&&this.$router.push("/dashboard")}},I={class:"auth-layout-wrap flex justify-center min-h-screen flex-col bg-cover items-center",style:{"background-image":"url(../../images/photo-wide-4.jpg)"}},$={class:"container-session-v1 max-w-2xl"},j={class:"grid grid-cols-12"},B={class:"col-span-12 lg:col-span-6"},O={class:"p-5"},T=l("h1",{class:"mb-3 text-lg"},"Se connecter ",-1),M={class:"mb-3"},V=l("label",{class:"text-xs text-gray-600",for:""},"Adresse mail",-1),E={class:"mb-3"},U=l("label",{class:"text-xs text-gray-600",for:""},"Mot de passe",-1),D={key:0,class:"text-red-500"},z={class:"mb-4"},F=g("Connexion"),R={class:"col-span-12 bg-cover lg:col-span-6",style:{"background-image":"url(../../images/photo-long-3.jpg)"}},q={class:"flex justify-center items-center flex-col h-full px-4 py-2"},H=l("p",{class:"mb-14"},"Vous n'avez pas de compte ?",-1),Z=l("i",{class:"i-Mail-with-At-Sign align-middle mr-2"},null,-1),J=g("Créer un compte ");P.render=function(e,o,r,m,g,h){const f=t("BaseBtn"),b=t("BaseCard");return s(),a("div",I,[l("div",$,[n(b,{noPadding:"",class:"overflow-hidden"},{default:i((()=>[l("div",j,[l("div",B,[l("div",O,[T,l("form",null,[l("div",M,[V,d(l("input",{class:"w-full px-4 py-1 bg-gray-100 focus:outline-none border border-gray-400 rounded-full",type:"email",placeholder:"","onUpdate:modelValue":o[0]||(o[0]=e=>g.mail=e)},null,512),[[c,g.mail]])]),l("div",E,[U,d(l("input",{class:"w-full px-4 py-1 bg-gray-100 focus:outline-none border border-gray-400 rounded-full",type:"password",placeholder:"","onUpdate:modelValue":o[1]||(o[1]=e=>g.password=e)},null,512),[[c,g.password]])]),g.verif?p("",!0):(s(),a("p",D,u(g.errorMessage),1)),l("div",z,[n(f,{block:"",class:"bg-green-500 mb-2 text-white  rounded-full",onClick:h.login},{default:i((()=>[F])),_:1},8,["onClick"])])])])]),l("div",R,[l("div",q,[H,n(f,{block:"",rounded:"",class:"mb-3 border border-green-500 bg-gray-100 text-green-500 hover:bg-green-500 hover:text-white",onClick:o[2]||(o[2]=e=>this.$router.push("/register"))},{default:i((()=>[Z,J])),_:1})])])])])),_:1})])])};const W={name:"register",data:()=>({firstName:null,lastName:null,mail:null,password:null,validForm:!0,errorMessage:null}),methods:{register(){const e=/^[A-Za-zÀ-ú'-]{1,15}$/g,t=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;this.firstName&&this.lastName&&this.mail&&this.password?this.firstName.match(e)&&this.lastName.match(e)&&this.mail.match(t)?fetch("https://warm-inlet-55236.herokuapp.com/api/register",{method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify({first_name:this.firstName,last_name:this.lastName,email:this.mail,password:this.password})}).then((e=>e.json())).then((e=>{200===e.statusCode?(this.toast("Registered successfully","success"),this.$router.push(`/login?email=${this.mail}`),this.validForm=!0):(this.toast(e.res.message,"danger"),this.errorMessage=e.res.message,this.validForm=!1)})).catch((e=>{console.log(e),this.toast("Something went wrong","danger"),this.validForm=!1,this.errorMessage="Une erreur est survenue"})):(this.toast("Please enter valid data","danger"),this.validForm=!1,this.errorMessage="Veuillez entrer des données valides"):(this.toast("Please fill all the fields.","danger"),this.validForm=!1,this.errorMessage="Veuillez remplir tous les champs")}},mounted(){localStorage.getItem("token")&&this.$router.push("/dashboards/dashboard")},setup:()=>({toast:(e,t)=>{m(e,{position:"top-left",timeout:5e3,type:t,showIcon:!0})}})},G={class:"auth-layout-wrap flex justify-center min-h-screen flex-col bg-cover items-center",style:{"background-image":"url(../../images/photo-wide-4.jpg)"}},K={class:"container-session-v1 max-w-2xl"},Q={class:"grid grid-cols-12"},X={class:"col-span-12 bg-cover lg:col-span-6",style:{"background-image":"url(../../images/photo-long-3.jpg)"}},Y={class:"block justify-center items-center flex-col h-full px-4 py-2 lg:flex"},ee=l("p",{class:"mb-14"},"Vous avez déjà un compte ?",-1),te=l("i",{class:"i-Mail-with-At-Sign align-middle mr-2"},null,-1),se=g("Se connecter "),oe={class:"col-span-12 lg:col-span-6"},ae={class:"p-5"},re=l("h1",{class:"mb-3 text-lg"},"Créer un compte ",-1),le={class:"mb-3"},ne=l("label",{class:"text-base text-gray-600",for:""},"Votre prénom",-1),ie={class:"mb-3"},de=l("label",{class:"text-base text-gray-600",for:""},"Votre nom",-1),ce={class:"mb-3"},ue=l("label",{class:"text-base text-gray-600",for:""},"Votre adresse Mail",-1),pe={class:"mb-3"},me=l("label",{class:"text-base text-gray-600",for:""},"Mot de passe",-1),ge=g("Créer le compte");W.render=function(e,o,r,u,p,m){const g=t("BaseBtn"),h=t("BaseCard");return s(),a("div",G,[l("div",K,[n(h,{noPadding:"",class:"overflow-hidden"},{default:i((()=>[l("div",Q,[l("div",X,[l("div",Y,[ee,n(g,{block:"",rounded:"",class:"mb-3 border border-green-500 bg-gray-100 text-green-500 hover:bg-green-500 hover:text-white",onClick:o[0]||(o[0]=e=>this.$router.push("/login"))},{default:i((()=>[te,se])),_:1})])]),l("div",oe,[l("div",ae,[re,l("form",null,[l("div",le,[ne,d(l("input",{class:"w-full px-4 py-1 border border-gray focus:outline-none rounded-full",type:"text",placeholder:"","onUpdate:modelValue":o[1]||(o[1]=e=>p.firstName=e)},null,512),[[c,p.firstName]])]),l("div",ie,[de,d(l("input",{class:"w-full px-4 py-1 border border-gray focus:outline-none rounded-full",type:"text",placeholder:"","onUpdate:modelValue":o[2]||(o[2]=e=>p.lastName=e)},null,512),[[c,p.lastName]])]),l("div",ce,[ue,d(l("input",{class:"w-full px-4 py-1 border border-gray focus:outline-none rounded-full",type:"email",placeholder:"","onUpdate:modelValue":o[3]||(o[3]=e=>p.mail=e)},null,512),[[c,p.mail]])]),l("div",pe,[me,d(l("input",{class:"w-full px-4 py-1 border border-gray focus:outline-none rounded-full",type:"password",placeholder:"","onUpdate:modelValue":o[4]||(o[4]=e=>p.password=e)},null,512),[[c,p.password]])]),n(g,{rounded:"",block:"",class:"bg-green-500 text-white",onClick:m.register},{default:i((()=>[ge])),_:1},8,["onClick"])])])])])])),_:1})])])};const he=[{path:"/",name:"Home",component:()=>C((()=>import("./index.126a49bb.js")),["assets/index.126a49bb.js","assets/index.75b219c9.css","assets/vendor.dc6bd94e.js"]),redirect:"/dashboard",meta:{title:"Home"},children:[{path:"/dashboard",name:"Dashboard",component:()=>C((()=>import("./Dashboards.6b0286ff.js")),["assets/Dashboards.6b0286ff.js","assets/Breadcrumbs.7ab39bf2.js","assets/vendor.dc6bd94e.js"]),meta:{title:"Dashboard"}},{path:"/options",name:"components",component:()=>C((()=>import("./Options.c797e357.js")),["assets/Options.c797e357.js","assets/Breadcrumbs.7ab39bf2.js","assets/vendor.dc6bd94e.js"]),meta:{title:"Options"}}]},{path:"/login",component:P},{path:"/register",component:W},{path:"/:path(.*)",component:A}],fe=h({history:f(),scrollBehavior:(e,t,s)=>({left:0,top:0}),routes:he});fe.afterEach((()=>{window.innerWidth<=1200&&(N.state.largeSidebar.sidebarToggleProperties.isSideNavOpen,N.commit("largeSidebar/toggleSidebarProperties"))}));b("data-v-6c51b3fe");const be={class:"card flex flex-col bg-white dark:bg-gray-800 dark:text-white"};v();const ve={props:{noPadding:Boolean},setup(e){const t=e;return(e,o)=>(s(),a("div",be,[y(e.$slots,"cardHeader",{},void 0,!0),l("div",{class:k(["card-body",t.noPadding?"noPadding":""])},[y(e.$slots,"default",{},void 0,!0)],2)]))},__scopeId:"data-v-6c51b3fe"};const ye={props:{block:Boolean,sm:Boolean,xl:Boolean,icon:Boolean,rounded:Boolean,icon:Boolean},setup(e){const t=e;return(e,o)=>(s(),a("button",{type:"button",class:k(["btn  rounded font-normal leading-4 ripple",[t.block?"block w-full":"inline-block",t.sm?"sm":"",t.xl?"xl":"",t.rounded?"rounded-full":"",t.icon?"p-2 flex items-center justify-center":"py-2 px-5"]])},[y(e.$slots,"default",{},void 0,!0)],2))},__scopeId:"data-v-cadb3306"};x(L).component("BaseCard",ve).component("BaseBtn",ye).use(w).use(S).use(N).use(fe).mount("#app");
